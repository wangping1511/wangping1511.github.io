---
layout: article
title: å‘è¡Œä»¥å¤ªåŠä»£å¸
tags: ["åŒºå—é“¾"]
---

### 1.æµè§ˆå™¨å®‰è£… MetaMask æ’ä»¶ [ä¸‹è½½åœ°å€](https://metamask.io/download.html)
- æ³¨å†Œä½¿ç”¨ MetaMask
  
    åˆ›å»ºé’±åŒ…ã€åŒæ„åè®®ã€ä¿å­˜å¯†è¯­ã€éªŒè¯å¯†è¯­
    ![](https://user-gold-cdn.xitu.io/2020/7/14/1734bcc9b4750683?w=1690&h=1158&f=png&s=220076)
    åˆ›å»ºæˆåŠŸ
    ![](https://user-gold-cdn.xitu.io/2020/7/14/1734bd47f46e1bc4?w=1986&h=1554&f=png&s=170192)

- æµ‹è¯•ç¯å¢ƒå­˜å…¥ ETH

    é€‰æ‹©æµ‹è¯•ç½‘ç»œ
    ![](https://user-gold-cdn.xitu.io/2020/7/14/1734bfe6795e1211?w=1974&h=1542&f=png&s=211883)
    ç‚¹å‡» **å­˜å…¥**  **è·å– Ether**
    ![](https://user-gold-cdn.xitu.io/2020/7/14/1734c002db7b5fcb?w=1998&h=1546&f=png&s=197681)

    ç‚¹å‡»è·å–æŒ‰é’®è·å– ether,ç¨ååœ¨é’±åŒ…æŸ¥çœ‹ ETH å˜ä¸º 1
    ![](https://user-gold-cdn.xitu.io/2020/7/14/1734c0cd6922c01f?w=2388&h=1230&f=png&s=137312)
    ![](https://user-gold-cdn.xitu.io/2020/7/14/1734c3580927accd?w=814&h=1300&f=png&s=72018)

    [è·å–æµ‹è¯• ETH](https://faucet.ropsten.be/ ) è¿™ä¸ªç½‘ç«™ä¹Ÿå¯ä»¥è·å–æµ‹è¯• ETH

### 2.è¿è¡Œåˆçº¦,å‘è¡Œä»£å¸

- åˆçº¦ä»£ç 

```
pragma solidity ^0.4.19;

interface tokenRecipient { function receiveApproval(address _from, uint256 _value, address _token, bytes _extraData) public; }

contract TokenERC20 {
    string public name;
    string public symbol;
    uint8 public decimals = 18;  // decimals å¯ä»¥æœ‰çš„å°æ•°ç‚¹ä¸ªæ•°ï¼Œæœ€å°çš„ä»£å¸å•ä½ã€‚18 æ˜¯å»ºè®®çš„é»˜è®¤å€¼
    uint256 public totalSupply;

    // ç”¨mappingä¿å­˜æ¯ä¸ªåœ°å€å¯¹åº”çš„ä½™é¢
    mapping (address => uint256) public balanceOf;
    // å­˜å‚¨å¯¹è´¦å·çš„æ§åˆ¶
    mapping (address => mapping (address => uint256)) public allowance;

    // äº‹ä»¶ï¼Œç”¨æ¥é€šçŸ¥å®¢æˆ·ç«¯äº¤æ˜“å‘ç”Ÿ
    event Transfer(address indexed from, address indexed to, uint256 value);

    // äº‹ä»¶ï¼Œç”¨æ¥é€šçŸ¥å®¢æˆ·ç«¯ä»£å¸è¢«æ¶ˆè´¹
    event Burn(address indexed from, uint256 value);

    /**
     * åˆå§‹åŒ–æ„é€ 
     */
    function TokenERC20(uint256 initialSupply, string tokenName, string tokenSymbol) public {
        totalSupply = initialSupply * 10 ** uint256(decimals);  // ä¾›åº”çš„ä»½é¢ï¼Œä»½é¢è·Ÿæœ€å°çš„ä»£å¸å•ä½æœ‰å…³ï¼Œä»½é¢ = å¸æ•° * 10 ** decimalsã€‚
        balanceOf[msg.sender] = totalSupply;                // åˆ›å»ºè€…æ‹¥æœ‰æ‰€æœ‰çš„ä»£å¸
        name = tokenName;                                   // ä»£å¸åç§°
        symbol = tokenSymbol;                               // ä»£å¸ç¬¦å·
    }

    /**
     * ä»£å¸äº¤æ˜“è½¬ç§»çš„å†…éƒ¨å®ç°
     */
    function _transfer(address _from, address _to, uint _value) internal {
        // ç¡®ä¿ç›®æ ‡åœ°å€ä¸ä¸º0x0ï¼Œå› ä¸º0x0åœ°å€ä»£è¡¨é”€æ¯
        require(_to != 0x0);
        // æ£€æŸ¥å‘é€è€…ä½™é¢
        require(balanceOf[_from] >= _value);
        // ç¡®ä¿è½¬ç§»ä¸ºæ­£æ•°ä¸ª
        require(balanceOf[_to] + _value > balanceOf[_to]);

        // ä»¥ä¸‹ç”¨æ¥æ£€æŸ¥äº¤æ˜“ï¼Œ
        uint previousBalances = balanceOf[_from] + balanceOf[_to];
        // Subtract from the sender
        balanceOf[_from] -= _value;
        // Add the same to the recipient
        balanceOf[_to] += _value;
        Transfer(_from, _to, _value);

        // ç”¨assertæ¥æ£€æŸ¥ä»£ç é€»è¾‘ã€‚
        assert(balanceOf[_from] + balanceOf[_to] == previousBalances);
    }

    /**
     *  ä»£å¸äº¤æ˜“è½¬ç§»
     * ä»è‡ªå·±ï¼ˆåˆ›å»ºäº¤æ˜“è€…ï¼‰è´¦å·å‘é€`_value`ä¸ªä»£å¸åˆ° `_to`è´¦å·
     *
     * @param _to æ¥æ”¶è€…åœ°å€
     * @param _value è½¬ç§»æ•°é¢
     */
    function transfer(address _to, uint256 _value) public {
        _transfer(msg.sender, _to, _value);
    }

    /**
     * è´¦å·ä¹‹é—´ä»£å¸äº¤æ˜“è½¬ç§»
     * @param _from å‘é€è€…åœ°å€
     * @param _to æ¥æ”¶è€…åœ°å€
     * @param _value è½¬ç§»æ•°é¢
     */
    function transferFrom(address _from, address _to, uint256 _value) public returns (bool success) {
        require(_value <= allowance[_from][msg.sender]);     // Check allowance
        allowance[_from][msg.sender] -= _value;
        _transfer(_from, _to, _value);
        return true;
    }

    /**
     * è®¾ç½®æŸä¸ªåœ°å€ï¼ˆåˆçº¦ï¼‰å¯ä»¥åˆ›å»ºäº¤æ˜“è€…åä¹‰èŠ±è´¹çš„ä»£å¸æ•°ã€‚
     *
     * å…è®¸å‘é€è€…`_spender` èŠ±è´¹ä¸å¤šäº `_value` ä¸ªä»£å¸
     *
     * @param _spender The address authorized to spend
     * @param _value the max amount they can spend
     */
    function approve(address _spender, uint256 _value) public
        returns (bool success) {
        allowance[msg.sender][_spender] = _value;
        return true;
    }

    /**
     * è®¾ç½®å…è®¸ä¸€ä¸ªåœ°å€ï¼ˆåˆçº¦ï¼‰ä»¥æˆ‘ï¼ˆåˆ›å»ºäº¤æ˜“è€…ï¼‰çš„åä¹‰å¯æœ€å¤šèŠ±è´¹çš„ä»£å¸æ•°ã€‚
     *
     * @param _spender è¢«æˆæƒçš„åœ°å€ï¼ˆåˆçº¦ï¼‰
     * @param _value æœ€å¤§å¯èŠ±è´¹ä»£å¸æ•°
     * @param _extraData å‘é€ç»™åˆçº¦çš„é™„åŠ æ•°æ®
     */
    function approveAndCall(address _spender, uint256 _value, bytes _extraData)
        public
        returns (bool success) {
        tokenRecipient spender = tokenRecipient(_spender);
        if (approve(_spender, _value)) {
            // é€šçŸ¥åˆçº¦
            spender.receiveApproval(msg.sender, _value, this, _extraData);
            return true;
        }
    }

    /**
     * é”€æ¯æˆ‘ï¼ˆåˆ›å»ºäº¤æ˜“è€…ï¼‰è´¦æˆ·ä¸­æŒ‡å®šä¸ªä»£å¸
     */
    function burn(uint256 _value) public returns (bool success) {
        require(balanceOf[msg.sender] >= _value);   // Check if the sender has enough
        balanceOf[msg.sender] -= _value;            // Subtract from the sender
        totalSupply -= _value;                      // Updates totalSupply
        Burn(msg.sender, _value);
        return true;
    }

    /**
     * é”€æ¯ç”¨æˆ·è´¦æˆ·ä¸­æŒ‡å®šä¸ªä»£å¸
     *
     * Remove `_value` tokens from the system irreversibly on behalf of `_from`.
     *
     * @param _from the address of the sender
     * @param _value the amount of money to burn
     */
    function burnFrom(address _from, uint256 _value) public returns (bool success) {
        require(balanceOf[_from] >= _value);                // Check if the targeted balance is enough
        require(_value <= allowance[_from][msg.sender]);    // Check allowance
        balanceOf[_from] -= _value;                         // Subtract from the targeted balance
        allowance[_from][msg.sender] -= _value;             // Subtract from the sender's allowance
        totalSupply -= _value;                              // Update totalSupply
        Burn(_from, _value);
        return true;
    }
}
```



æ‰“å¼€åœ¨çº¿ç¼–è¾‘å™¨ [Remix](http://remix.ethereum.org/), åˆ›å»º `TokenERC20.sol` æ–‡ä»¶,å°†ä»£ç å¤åˆ¶åˆ°æ–‡ä»¶ä¸­

![](https://i.loli.net/2021/02/23/OQAEH3ukUqVsTLy.png)
ç‚¹å‡»ä¾§è¾¹æ ç¬¬äºŒä¸ªæŒ‰é’®ã€ç¼–è¯‘æ–‡ä»¶;ä¼šè¾“å‡ºå‡ æ¡è­¦å‘Šä¿¡æ¯,ä¸ç”¨ç®¡.
![](https://i.loli.net/2021/02/23/Zl7QexoScW3TNiq.png)

ç‚¹å‡»ä¾§è¾¹æ ç¬¬ä¸‰ä¸ªæŒ‰é’® ,  é€‰æ‹© `Injected Web3` , Deploy    ( è¾“å…¥å‘è¡Œæ€»é‡,å‘è¡Œå¸å…¨ç§°,å‘è¡Œå¸ç®€ç§° ) , ç‚¹å‡» Deploy æŒ‰é’®ä¼šæ‹‰å‡º MateMask çš„æç¤ºæ¡†ç‚¹å‡»ç¡®è®¤.

![](https://i.loli.net/2021/02/23/FL3wgWdZA79kz2h.png)
![](https://i.loli.net/2021/02/23/jcxfEeOg8aWFNoJ.png)

æ‰“å¼€ MateMask æŸ¥çœ‹è¯¦æƒ… , å¤åˆ¶è”ç³»åœ°å€

![](https://i.loli.net/2021/02/23/czKPvbLAWwM2nH8.png)

æ‰“å¼€ MateMask èœå•, æ·»åŠ ä»£å¸, è‡ªå®šä¹‰ä»£å¸, ç²˜è´´åœ°å€

![](https://i.loli.net/2021/02/23/2zlYKN8aAcRVkGL.png)
![](https://i.loli.net/2021/02/23/ReAWn8VZtazQFjv.png)
æ·»åŠ æˆåŠŸ! ğŸ‰
![](https://i.loli.net/2021/02/23/1pCodHVKWqBk49v.png)